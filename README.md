# Writing Timeline Platform

ì‘ê°€ì˜ ì°½ì‘ ê³¼ì •ì„ íˆ¬ëª…í•˜ê²Œ ê³µìœ í•˜ëŠ” í”Œë«í¼ì…ë‹ˆë‹¤. ë¬¸ì„œì˜ ì‘ì„± ê³¼ì •ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê¸°ë¡í•˜ê³ , ë…ìë“¤ì´ ì‘ê°€ì˜ ì‚¬ê³  ê³¼ì •ê³¼ ì°½ì‘ ì—¬ì •ì„ ì²´í—˜í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

## ğŸŒŸ ì£¼ìš” ê¸°ëŠ¥

### ğŸ“ ì‹¤ì‹œê°„ í¸ì§‘ê¸° (US1+US2)
- **ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ìº¡ì²˜**: íƒ€ì´í•‘, ì‚­ì œ, ìˆ˜ì • ë“± ëª¨ë“  í¸ì§‘ ê³¼ì •ì„ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ê¸°ë¡
- **ìë™ ì €ì¥**: ë¡œì»¬ ë° í´ë¼ìš°ë“œ ë™ê¸°í™”ë¡œ ì‘ì—… ë‚´ìš© ë³´í˜¸
- **ì„¸ì…˜ ê´€ë¦¬**: ì‘ì—… ì„¸ì…˜ë³„ë¡œ êµ¬ë¶„ëœ í¸ì§‘ ê¸°ë¡

### ğŸ“– ë…ì ë·° (US5)
- **ê¹”ë”í•œ ì½ê¸° í™”ë©´**: ìµœì¢… ì™„ì„±ëœ ë¬¸ì„œë¥¼ ìœ„í•œ ìµœì í™”ëœ ë…ì„œ í™˜ê²½
- **ê³µê°œ/ë¹„ê³µê°œ ì„¤ì •**: ì‘ê°€ê°€ ì›í•˜ëŠ” ì‹œì ì— ë¬¸ì„œ ê³µê°œ
- **ë°˜ì‘í˜• ë””ìì¸**: ë°ìŠ¤í¬í†±, íƒœë¸”ë¦¿, ëª¨ë°”ì¼ ìµœì í™”

### ğŸ¬ íƒ€ì„ë¼ì¸ ì¬ìƒ (US6+US7)
- **ì‹¤ì‹œê°„ ì¬ìƒ**: ì‘ê°€ì˜ ì‘ì„± ê³¼ì •ì„ ì˜í™”ì²˜ëŸ¼ ì¬ìƒ
- **ì¬ìƒ ì»¨íŠ¸ë¡¤**: ì¬ìƒ/ì¼ì‹œì •ì§€/ì •ì§€, ì†ë„ ì¡°ì ˆ (0.5x~4x)
- **íƒ€ì„ë¼ì¸ ìŠ¤í¬ëŸ½**: ì›í•˜ëŠ” ì‹œì ìœ¼ë¡œ ë°”ë¡œ ì´ë™
- **ì••ì¶•ëœ íƒ€ì´ë°**: ê¸´ íœ´ì‹ ì‹œê°„ì€ ìë™ìœ¼ë¡œ ì••ì¶•í•˜ì—¬ ì‹œì²­ í¸ì˜ì„± í–¥ìƒ

### ğŸ“Š ë³€ê²½ì‚¬í•­ ë¹„êµ (US8)
- **ì´ˆê³  vs ìµœì¢…ë³¸**: ì²« ë²ˆì§¸ ë²„ì „ê³¼ ìµœì¢… ë²„ì „ì˜ ë‚˜ë€íˆ ë¹„êµ
- **ì‹œê°ì  í•˜ì´ë¼ì´íŠ¸**: ì¶”ê°€/ì‚­ì œ/ë³€ê²½ ë‚´ìš©ì„ ìƒ‰ìƒìœ¼ë¡œ êµ¬ë¶„
- **í†µê³„ ì •ë³´**: ë³€ê²½ëŸ‰, ìœ ì‚¬ë„ ë“± ì •ëŸ‰ì  ë¶„ì„

## ğŸ—ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: Next.js 14, React 18, TypeScript
- **Backend**: Next.js API Routes, Supabase
- **Database**: PostgreSQL (Supabase)
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: Supabase Realtime
- **ë¡œì»¬ ì €ì¥ì†Œ**: Dexie (IndexedDB)
- **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS
- **ë°°í¬**: Vercel

## ğŸ›ï¸ ì•„í‚¤í…ì²˜

### ì´ë²¤íŠ¸ ì†Œì‹± (Event Sourcing)
ëª¨ë“  í¸ì§‘ ì‘ì—…ì„ ì´ë²¤íŠ¸ë¡œ ì €ì¥í•˜ì—¬ ì™„ì „í•œ ê¸°ë¡ì„ ìœ ì§€í•©ë‹ˆë‹¤.

```typescript
interface WritingEvent {
  id: string;
  document_id: string;
  session_id: string;
  timestamp: number;
  event_type: 'insert' | 'delete' | 'replace';
  position: number;
  content?: string;
  content_before?: string;
}
```

### 3-Layer ë°ì´í„° ë™ê¸°í™”
1. **Local First**: IndexedDBë¥¼ ì´ìš©í•œ ì¦‰ì‹œ ë°˜ì‘
2. **Optimistic Updates**: UI ì¦‰ì‹œ ì—…ë°ì´íŠ¸
3. **Background Sync**: Supabaseë¡œ ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™”

```
User Input â†’ Local Storage â†’ UI Update â†’ Cloud Sync
     â†“            â†“            â†“            â†“
   ì¦‰ì‹œ         ì¦‰ì‹œ        ì¦‰ì‹œ      ë°±ê·¸ë¼ìš´ë“œ
```

## ğŸš€ ì‹œì‘í•˜ê¸°

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
- Node.js 18.0 ì´ìƒ
- npm ë˜ëŠ” yarn
- Supabase ê³„ì •

### ì„¤ì¹˜ ë° ì‹¤í–‰

1. **ì €ì¥ì†Œ í´ë¡ **
   ```bash
   git clone https://github.com/your-username/writeback.git
   cd writeback
   ```

2. **ì˜ì¡´ì„± ì„¤ì¹˜**
   ```bash
   npm install
   ```

3. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
   ```bash
   cp .env.example .env.local
   ```
   
   `.env.local` íŒŒì¼ì— Supabase ì„¤ì • ì¶”ê°€:
   ```env
   NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
   SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
   ```

4. **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •**
   
   Supabase í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ìŒ SQL ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰:
   ```sql
   -- 1. í…Œì´ë¸” ìƒì„±
   \i supabase/migrations/001_schema.sql
   
   -- 2. ì¸ë±ìŠ¤ ìƒì„±
   \i supabase/migrations/002_indexes.sql
   
   -- 3. RLS ì •ì±… ì„¤ì •
   \i supabase/migrations/003_rls.sql
   ```

5. **ê°œë°œ ì„œë²„ ì‹¤í–‰**
   ```bash
   npm run dev
   ```

6. **ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸**
   
   http://localhost:3000 ì ‘ì†

### ë°°í¬ (Vercel)

1. **Vercel ê³„ì • ì—°ê²°**
   ```bash
   npm install -g vercel
   vercel login
   ```

2. **í”„ë¡œì íŠ¸ ë°°í¬**
   ```bash
   vercel
   ```

3. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
   
   Vercel ëŒ€ì‹œë³´ë“œì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `SUPABASE_SERVICE_ROLE_KEY`

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
writeback/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (editor)/                 # í¸ì§‘ê¸° í˜ì´ì§€ ê·¸ë£¹
â”‚   â”‚   â””â”€â”€ documents/[id]/
â”‚   â”‚       â””â”€â”€ playback/         # ì¬ìƒ í˜ì´ì§€
â”‚   â”œâ”€â”€ (reader)/                 # ë…ì í˜ì´ì§€ ê·¸ë£¹
â”‚   â”‚   â””â”€â”€ read/[id]/
â”‚   â”‚       â””â”€â”€ diff/             # ë¹„êµ í˜ì´ì§€
â”‚   â”œâ”€â”€ api/                      # API ë¼ìš°íŠ¸
â”‚   â”‚   â””â”€â”€ documents/[id]/
â”‚   â”‚       â””â”€â”€ events/           # ì´ë²¤íŠ¸ API
â”‚   â””â”€â”€ globals.css               # ì „ì—­ ìŠ¤íƒ€ì¼
â”œâ”€â”€ components/                   # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ editor/                   # í¸ì§‘ê¸° ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ reader/                   # ë…ì ë·° ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ playback/                 # ì¬ìƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ diff/                     # ë¹„êµ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ ui/                       # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/                        # React í›…
â”‚   â”œâ”€â”€ usePlayback.ts            # ì¬ìƒ ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ useDiff.ts                # ë¹„êµ ê¸°ëŠ¥
â”‚   â””â”€â”€ use-documents.ts          # ë¬¸ì„œ ê´€ë¦¬
â”œâ”€â”€ lib/                          # í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”œâ”€â”€ event-sourcing/           # ì´ë²¤íŠ¸ ì†Œì‹± ì—”ì§„
â”‚   â”œâ”€â”€ diff/                     # ì°¨ì´ì  ê³„ì‚°
â”‚   â”œâ”€â”€ db/                       # ë¡œì»¬ ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”œâ”€â”€ supabase/                 # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ utils/                    # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ supabase/                     # ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ migrations/
â”œâ”€â”€ types/                        # TypeScript íƒ€ì… ì •ì˜
â””â”€â”€ stores/                       # ìƒíƒœ ê´€ë¦¬ (Zustand)
```

## ğŸ”§ ê°œë°œ ê°€ì´ë“œ

### íƒ€ì… ì²´í¬ ë° ë¦°íŠ¸
```bash
npm run type-check    # TypeScript íƒ€ì… ì²´í¬
npm run lint          # ESLint ì‹¤í–‰
npm run format        # Prettier í¬ë§·íŒ…
```

### í…ŒìŠ¤íŠ¸
```bash
npm run test          # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Vitest)
npm run test:e2e      # E2E í…ŒìŠ¤íŠ¸ (Playwright)
```

### ë¹Œë“œ
```bash
npm run build         # í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run start         # í”„ë¡œë•ì…˜ ì„œë²„ ì‹¤í–‰
```

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

- **Row Level Security (RLS)**: Supabaseì—ì„œ ì‚¬ìš©ìë³„ ë°ì´í„° ì ‘ê·¼ ì œì–´
- **JWT ì¸ì¦**: Supabase Authë¥¼ í†µí•œ ì•ˆì „í•œ ì‚¬ìš©ì ì¸ì¦
- **API ë¼ìš°íŠ¸ ë³´í˜¸**: ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ì— ì¸ì¦ ê²€ì‚¬
- **í™˜ê²½ ë³€ìˆ˜**: ë¯¼ê°í•œ ì •ë³´ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬

## ğŸ¯ ì‚¬ìš©ì ì—¬ì •

### ì‘ê°€ ì›Œí¬í”Œë¡œìš°
1. **ê°€ì… ë° ë¡œê·¸ì¸**
2. **ìƒˆ ë¬¸ì„œ ìƒì„±**
3. **ì‹¤ì‹œê°„ ì‘ì„±** (ëª¨ë“  ê³¼ì •ì´ ìë™ ê¸°ë¡ë¨)
4. **ë¬¸ì„œ ê³µê°œ ì„¤ì •**
5. **ë…ìì™€ ê³µìœ **

### ë…ì ì›Œí¬í”Œë¡œìš°
1. **ê³µê°œëœ ë¬¸ì„œ ì ‘ê·¼**
2. **ìµœì¢…ë³¸ ì½ê¸°**
3. **íƒ€ì„ë¼ì¸ ì¬ìƒìœ¼ë¡œ ì‘ì„± ê³¼ì • ì²´í—˜**
4. **ì´ˆê³ ì™€ ìµœì¢…ë³¸ ë¹„êµ ë¶„ì„**

## ğŸš§ í–¥í›„ ê³„íš

- [ ] **í˜‘ì—… ê¸°ëŠ¥**: ë‹¤ì¤‘ ì‘ê°€ ë™ì‹œ í¸ì§‘
- [ ] **ì½”ë©˜íŠ¸ ì‹œìŠ¤í…œ**: ë…ì í”¼ë“œë°± ê¸°ëŠ¥
- [ ] **ë¶„ì„ ëŒ€ì‹œë³´ë“œ**: ì‘ì„± íŒ¨í„´ ë¶„ì„
- [ ] **export ê¸°ëŠ¥**: PDF, EPUB ë“± ë‹¤ì–‘í•œ í˜•ì‹ ì§€ì›
- [ ] **AI ì¸ì‚¬ì´íŠ¸**: ì‘ì„± ìŠ¤íƒ€ì¼ ë¶„ì„ ë° ì œì•ˆ

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License - ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ“ ë¬¸ì˜

- **ì´ë©”ì¼**: your-email@example.com
- **GitHub Issues**: [ì´ìŠˆ ìƒì„±](https://github.com/your-username/writeback/issues)
- **Discord**: [ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬](https://discord.gg/your-invite)

---

**Writing Timeline Platform**ì€ ì‘ê°€ì™€ ë…ì ì‚¬ì´ì˜ ìƒˆë¡œìš´ ì†Œí†µ ë°©ì‹ì„ ì œì•ˆí•©ë‹ˆë‹¤. ë‹¨ìˆœíˆ ì™„ì„±ëœ ê²°ê³¼ë¬¼ì„ ê³µìœ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì°½ì‘ì˜ ì „ ê³¼ì •ì„ íˆ¬ëª…í•˜ê²Œ ê³µê°œí•¨ìœ¼ë¡œì¨ ë” ê¹Šì€ ì´í•´ì™€ ê³µê°ì„ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.